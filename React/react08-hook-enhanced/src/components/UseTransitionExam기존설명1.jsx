

/**
ğŸ”¹ useTransitionì´ë€?
React 18ì—ì„œ ì¶”ê°€ëœ í›…ìœ¼ë¡œ, ë‚®ì€ ìš°ì„ ìˆœìœ„ ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ì—¬ ë Œë”ë§ ì„±ëŠ¥ì„ ìµœì í™”í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
  -ê¸°ë³¸ ì›ë¦¬: useTransitionì„ ì‚¬ìš©í•˜ë©´ ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ "ê¸´ê¸‰í•œ ìƒíƒœ"ì™€ "ê¸´ê¸‰í•˜ì§€ ì•Šì€ ìƒíƒœ"ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆìŒ.
  -ì‚¬ìš© ëª©ì :
    ë²„íŠ¼ í´ë¦­, ì…ë ¥ ë³€ê²½ ë“± ë¹ ë¥¸ ë°˜ì‘ì´ í•„ìš”í•œ UIì™€
    ë¦¬ìŠ¤íŠ¸ í•„í„°ë§, ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ë Œë”ë§í•˜ëŠ” ì‘ì—… ë“± ìƒëŒ€ì ìœ¼ë¡œ ëŠë ¤ë„ ë˜ëŠ” UIë¥¼ ë¶„ë¦¬
    ì´ë¥¼ í†µí•´ UIê°€ ëŠê¸°ì§€ ì•Šê³  ë¶€ë“œëŸ½ê²Œ ë Œë”ë§ë˜ë„ë¡ ìµœì í™”

ì…ë ¥ í•„ë“œì— ì…ë ¥í•  ë•Œ ë¦¬ìŠ¤íŠ¸ë¥¼ í•„í„°ë§í•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„
  ì‚¬ìš©ìê°€ ë¹ ë¥´ê²Œ ì…ë ¥í•´ë„ ì…ë ¥ ë°˜ì‘ì„±ì€ ìœ ì§€
  ë¦¬ìŠ¤íŠ¸ í•„í„°ë§ì€ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ì—¬ ë Œë”ë§ ì†ë„ë¥¼ ìµœì í™”
*/

import { useState, useTransition } from "react";

const UseTransitionExam = () => {

  const [query, setQuery] = useState(""); // ê¸´ê¸‰í•œ ìƒíƒœ (ì…ë ¥ê°’)
  const [filteredItems, setFilteredItems] = useState([]); // ë¹„ê¸´ê¸‰í•œ ìƒíƒœ (í•„í„°ë§ëœ ë¦¬ìŠ¤íŠ¸)
  //isPending : ë¹„ê¸´ê¸‰ ìƒíƒœê°€ ë³€ê²½ë ë•Œ ë¡œë”© UIë¥¼ í‘œì‹œí•  ìˆ˜ ìˆìŒ
  //startTransition : ë¹„ê¸´ê¸‰ ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•œ í•¨ìˆ˜ 
  const [isPending, startTransition] = useTransition();

  /**
  Array.from(arrayLike, mapFunction);
    : ì²«ë²ˆì§¸ ì¸ìˆ˜ëŠ” ìœ ì‚¬ë°°ì—´, ë‘ë²ˆì§¸ëŠ” mapí•¨ìˆ˜. 
    -ìœ ì‚¬ë°°ì—´
      { length: 10000 } >> ì‹¤ì œ ê°’ì„ ê°€ì§€ì§€ ì•Šê³  ê¸¸ì´ë§Œ ê°€ì§„ ìœ ì‚¬ë°°ì—´ê°ì²´ 
          Array.from() ì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ length ì†ì„±ì´ í•„ìˆ˜ì ì„. 
    -mapí•¨ìˆ˜ 
      í˜•ì‹ : map(currentValue, index)ì™€ ê°™ì€ ì¸ìˆ˜ë¥¼ ê°€ì§. 
      ì‹¤ì œ ê°’ì„ ê°€ì§€ì§€ ì•ŠëŠ” ìœ ì‚¬ë°°ì—´ì´ë¯€ë¡œ (_, i)ì™€ ê°™ì´ ê¸°ìˆ í•˜ëŠ”ê²ƒì„. 
      _(ì–¸ë”ë°”)ëŠ” JSì—ì„œ 'ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë³€ìˆ˜'ë¼ëŠ” ê´€ë¡€ì ì¸ í‘œí˜„ì„. 
   */
  const itemStrs = Array.from({ length: 100000 }, (_, i) => `Item${i + 1}`); // Item1~100000ê¹Œì§€ ìƒì„±

  const changeItemStrs = (e) => {
    // ì…ë ¥ê°’ ì¦‰ì‹œ ì—…ë°ì´íŠ¸ (ê¸´ê¸‰ ìƒíƒœ)
    setQuery(e.target.value); 

    // ë¹„ê¸´ê¸‰í•œ ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ useTransitionìœ¼ë¡œ ì²˜ë¦¬
    /**
    includesí•¨ìˆ˜ : ë°°ì—´ ë˜ëŠ” ë¬¸ìì—´ì´ íŠ¹ì • ìš”ì†Œ(ë˜ëŠ” ë¬¸ìì—´)ë¥¼ í¬í•¨í•˜ëŠ”ì§€ í™•ì¸
      ë°°ì—´.includes("ê²€ìƒ‰í•­ëª©") >> ì¡´ì¬í•˜ë©´ true 
     */
    startTransition(() => {
      const filteredStr = itemStrs.filter((currVal) => currVal.includes(e.target.value));
      setFilteredItems(filteredStr);
    });
  };

  return (<>
    <h2>UseTransition ì‚¬ìš©í•˜ê¸°</h2>
    <input type="text" value={query} onChange={changeItemStrs} placeholder="ItemN í˜•ì‹ìœ¼ë¡œ ì…ë ¥" />

    {/* ë¡œë”© í‘œì‹œ */}
    {isPending && <p>í•„í„°ë§ ì¤‘...</p>}

    {/* í•„í„°ë§ëœ ê²°ê³¼ ì¶œë ¥. ê²°ê³¼ ì¤‘ 50ê°œë§Œ í‘œì‹œ. */}
    <ul>
      {filteredItems.slice(0,50).map((item, index) => (
        <li key={index}>{item}</li> 
      ))}
    </ul>
  </>);
}

export default UseTransitionExam;